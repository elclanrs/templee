(function(t){function n(t){this.data=t,this.length=this.data.length}function r(t){return new n(t)}function e(t,n){return function(){return t.apply(n||arguments[0],[].slice.call(arguments))}}function i(t,n){for(var r in t)n[r]=t[r];return n}function u(t,n){return t?t.map(e(n)).join(""):void 0}function c(t,n){var r=/#\{(\w+)\}/g,e=/@\{([^{}]+)=\{(.+)\}([^{}]+)\}/g,i=/(@=\{.+\})/g;return u(t,function(t){return u(n,function(n){return n.replace(r,function(n,r){return t[r]}).replace(i,function(t,n){return n.replace("@=","@{ =")+" }"}).replace(e,function(n,r,e,i){var c=e.match(/^\w+/)[0],o=e.gmatch(/\.(\w+)/g);return u(o.length?o:t[c],function(n){return r+(o.length?t[c][n]:n)+i})})})})}n.prototype={_new:function(t){return t=t.map(function(t){return i(t,{})}),this.length=this.data.length,r(t)},_filter:function(t){return this._new(this.data.filter(function(n,r){var e=/(.+)\.(.+)/.exec(this.prop)||[0,null,null],i=e[1],u=e[2];return t.call(this,u?n[i][u]:n[i],r)}.bind(this)))},get:function(t){return t?this.map(function(){return this[t]}):this.data},where:function(t){return this.prop=t,this},and:function(t){return this.where(t)},is:function(t){var n=t instanceof RegExp?t:RegExp("^"+t+"$"),r=/^([<>=%]+)([\d.]+)/.exec(t)||[0,null,0];return r[1]?this[r[1]](+r[2]):this._filter(function(t){return n.test(t)})},">":function(t){return this._filter(function(n){return n>t})},">=":function(t){return this._filter(function(n){return n>=t})},"<":function(t){return this._filter(function(n){return t>n})},"<=":function(t){return this._filter(function(n){return t>=n})},"%":function(t){return this._filter(function(n){return 0===n%t})},add:function(t){return this._new(this.data.concat[t])},slice:function(t,n){return this._new(this.get().slice(t,n))},each:function(t){return this.get().some(e(t)),this},map:function(t){return this._new(this.data.map(e(t)))},sort:function(t){return this._new(this.data.sort(function(n,r){return t?t.apply(this,n,r):n>r}.bind(this)))},eq:function(t){return this._new(this.data[t])},html:function(t,n){var r=(/^<(\w+)/.exec(n)||[0,null])[1],e=c(this.data,t);return r?n+e+"</"+r+">":e}},String.prototype.gmatch=function(t){var n=[];return this.replace(t,function(){var t=[].slice.call(arguments,1).slice(0,-2);n.push.apply(n,t)}),n},t.templee=r})(window);