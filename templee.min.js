(function(t){function n(t){this.data=t,this.length=this.data.length}function r(t){return new n(t)}function i(t,n){return function(){return t.apply(n||arguments[0],[].slice.call(arguments))}}function e(t,n){for(var r in t)n[r]=t[r];return n}function u(t,n){return t?t.map(i(n)).join(""):void 0}function o(t,n){var r=n.split(".");return r.length>1?t[r[0]][r[1]]:t[r[0]]}function c(t,n){n=n.join("");var r=/#\{([\w.]+)\}/g,i=/@\{([^{}]+)=\{([^{}]+)\}([^{}]+)\}/g;return u(t,function(t){return n.replace(r,function(n,r){return o(t,r)}).replace(i,function(n,r,i,e){return u(o(t,i),function(t){return r+t+e})})})}n.prototype={_new:function(t){return t=t.map(function(t){return e(t,{})}),this.length=this.data.length,r(t)},_filter:function(t){return this._new(this.data.filter(function(n,r){return t.call(this,o(n,this.prop),r)}.bind(this)))},get:function(t){return t?this.map(function(){return this[t]}):this.data},where:function(t){return this.prop=t,this},and:function(t){return this.where(t)},is:function(t){var n=t instanceof RegExp?t:RegExp("^"+t+"$"),r=/^([<>=%]+)([\d.]+)/.exec(t)||[0,null,0];return r[1]?this[r[1]](+r[2]):this._filter(function(t){return n.test(t)})},">":function(t){return this._filter(function(n){return n>t})},">=":function(t){return this._filter(function(n){return n>=t})},"<":function(t){return this._filter(function(n){return t>n})},"<=":function(t){return this._filter(function(n){return t>=n})},"%":function(t){return this._filter(function(n){return 0===n%t})},add:function(t){return this._new(this.data.concat[t])},slice:function(t,n){return this._new(this.get().slice(t,n))},each:function(t){return this.get().some(i(t)),this},map:function(t){return this._new(this.data.map(i(t)))},sort:function(t){return this._new(this.data.sort(function(n,r){return t?t.apply(this,n,r):n>r}.bind(this)))},eq:function(t){return this._new(this.data[t])},html:function(t,n){var r=(/^<(\w+)/.exec(n)||[0,null])[1],i=c(this.data,t);return r?n+i+"</"+r+">":i}},t.templee=r})(window);